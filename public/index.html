<!DOCTYPE html>
<html>
  <head>
    <title>Tic Tac Toe</title>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="script.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
      if (annyang) {
        // Let's define our first command. First the text we expect, and then the function it should call
        var commands = {
          ":color on square :square": function(color, square) {
            $("#commandList").append(
              $("<div>").text(color + " on square " + square)
            );
            document
              .getElementById("lastvoicecommand")
              .setAttribute(
                "text",
                "value:last voice command: " + color + " on square " + square
              );
            if (square == "One" || square == 1 || square == "one") {
              clicked("0,0");
              document.getElementById("0,0").emit("click");
            }
            if (
              square == "two" ||
              square == 2 ||
              square == "Two" ||
              square == "too" ||
              square == "Too" ||
              square == "tube" ||
              square == "to"
            ) {
              clicked("0,1");
              document.getElementById("0,1").emit("click");
            }
            if (square == "3" || square == "three" || square == "Three") {
              clicked("0,2");
              document.getElementById("0,2").emit("click");
            }
            if (square == "for" || square == 4 || square == "four") {
              clicked("1,0");
              document.getElementById("1,0").emit("click");
            }
            if (square == "five" || square == 5 || square == "Five") {
              clicked("1,1");
              document.getElementById("1,1").emit("click");
            }
            if (square == "six" || square == 6 || square == "Six") {
              clicked("1,2");
              document.getElementById("1,2").emit("click");
            }
            if (square == "seven" || square == 7 || square == "Seven") {
              clicked("2,0");
              document.getElementById("2,0").emit("click");
            }
            if (square == "eight" || square == 8 || square == "Eight") {
              clicked("2,1");
              document.getElementById("2,1").emit("click");
            }
            if (
              square == "nine" ||
              square == 9 ||
              square == "Nine" ||
              square == "knot"
            ) {
              clicked("2,2");
              document.getElementById("2,2").emit("click");
            }
          }
        };

        // Add our commands to annyang
        annyang.addCommands(commands);

        // Start listening. You can call this here, or attach this call to an event, button, etc.
        annyang.start();
      }
    </script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v6.0.0/dist/aframe-extras.loaders.min.js"></script>
  </head>

  <body onload="resetBoard()">
    <a-scene>
      <a-assets>
        <a-asset-item id="tank" src="/assets/cartoon_wood_tank/scene.gltf" />
      </a-assets>

      <a-entity
        environment="preset: forest; groundColor: #445; groundYScale: 10; groundTexture: walkernoise; skyColor: #000"
      ></a-entity>

      <a-entity position="0 0 2.5">
        <a-camera> <a-cursor> </a-cursor> </a-camera>
      </a-entity>

      <div id="commandList"></div>
      <a-entity
        position="2.8 3 -1"
        id="winner"
        text="value:Make your move!; color:black"
        height="1.5"
        width="4"
        scale="10 10 10"
      ></a-entity>
      <a-entity
        position="-.0 2.74 -1"
        id="instructions"
        text="value:Say 'blue on square <num>'; color:black"
        height="1"
        width="4"
        scale="2 2 2"
      ></a-entity>
      <a-entity
        position="2.0 2.74 -1"
        id="lastvoicecommand"
        text="value:last voice command:; color:black"
        height="1"
        width="4"
        scale="2 2 2"
      ></a-entity>
      <!--top row-->
      <a-box
        color="tomato"
        position="-1 2.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('0,0')"
        id="0,0"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="0 2.4 -1.7"
        id="square1text"
        text="value:1; color:black"
        scale="2 2 2"
      ></a-entity>
      <a-box
        color="tomato"
        position="0 2.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('0,1')"
        id="0,1"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="1 2.4 -1.7"
        id="square1text"
        text="value:2; color:black"
        scale="2 2 2"
      ></a-entity>
      <a-box
        color="tomato"
        position="1 2.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('0,2')"
        id="0,2"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="2 2.4 -1.7"
        id="square1text"
        text="value:3; color:black"
        scale="2 2 2"
      ></a-entity>
      <!--middle row-->
      <a-box
        color="tomato"
        position="-1 1.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('1,0')"
        id="1,0"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="0 1.5 -1.7"
        id="square1text"
        text="value:4; color:black"
        scale="2 2 2"
      ></a-entity>
      <a-box
        color="tomato"
        position="0 1.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('1,1')"
        id="1,1"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="1 1.5 -1.7"
        id="square1text"
        text="value:5; color:black"
        scale="2 2 2"
      ></a-entity>
      <a-box
        color="tomato"
        position="1 1.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('1,2')"
        id="1,2"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="2 1.5 -1.7"
        id="square1text"
        text="value:6; color:black"
        scale="2 2 2"
      ></a-entity>
      <!--bottom row-->
      <a-box
        color="tomato"
        position="-1 0.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('2,0')"
        id="2,0"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="0 .6 -1.7"
        id="square1text"
        text="value:7; color:black"
        scale="2 2 2"
      ></a-entity>
      <a-box
        color="tomato"
        position="0 0.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('2,1')"
        id="2,1"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="1 .6 -1.7"
        id="square1text"
        text="value:8; color:black"
        scale="2 2 2"
      ></a-entity>
      <a-box
        color="tomato"
        position="1 0.5 -2"
        height="0.5"
        width="0.5"
        depth="0.5"
        onclick="clicked('2,2')"
        id="2,2"
        animation="property: rotation; startEvents: click; from: 0 0 0; to: 360 90 90; dur: 1000"
      ></a-box>
      <a-entity
        position="2 .6 -1.7"
        id="square1text"
        text="value:9; color:black"
        scale="2 2 2"
      ></a-entity>

      <a-light
        id="animated-light"
        type="point"
        intensity=".8"
        position="0 6 6"
      ></a-light>
      <!-- TANKS -->
      <a-entity
        position="0 0 2"
        rotation="0 0 0"
        animation="property: rotation; from: 0 0 0; to: 0 360 0; loop: true; dur: 55000; easing: linear;"
      >
        <a-entity
          gltf-model="#tank"
          position="8 0.27 0"
          rotation="0 180 0"
          scale="0.4 0.4 0.4"
          animation-mixer
        >
        </a-entity>
        <a-entity
          gltf-model="#tank"
          position="-8 0.27 0"
          rotation="0 0 0"
          scale="0.4 0.4 0.4"
          animation-mixer
        >
        </a-entity>
        <a-entity
          gltf-model="#tank"
          position="0 0.27 8"
          rotation="0 90 0"
          scale="0.4 0.4 0.4"
          animation-mixer
        >
        </a-entity>
        <a-entity
          gltf-model="#tank"
          position="0 0.27 -8"
          rotation="0 -90 0"
          scale="0.4 0.4 0.4"
          animation-mixer
        >
        </a-entity>
      </a-entity>
    </a-scene>
    <audio
      id="soundtrack"
      src="assets/video-game-blockbuster.mp3"
      autoplay
      loop
    ></audio>
    <audio
      id="explosion-sound"
      src="assets/explosion.mp3"
    ></audio>
  </body>
</html>
